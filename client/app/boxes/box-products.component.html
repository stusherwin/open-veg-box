<cc-editable className="box-products" (editStart)="onEditStart($event)" (editEnd)="onEditEnd($event)" [tabindex]="editTabindex" cc-focus [handleClickOutside]="true">
  <div display>
    <div class="box-products-display" *ngIf="value.length">
      <div class="box-product" *ngFor="let p of value">
        <div class="box-product-detail box-product-name">{{p.name}}</div>
        <div class="box-product-detail box-product-quantity">{{p | quantity}}</div>
        <div class="box-product-detail box-product-action">
          <div class="spacer"></div>
        </div>
      </div>
    </div>
    <div class="box-products-display" *ngIf="!value.length">
      <div class="box-product">
        <div class="box-product-detail box-product-name">No products added</div>
        <div class="box-product-detail box-product-quantity">&nbsp;</div>
        <div class="box-product-detail box-product-action">
          <div class="spacer"></div>
        </div>
      </div>
    </div>
  </div>
  <div edit>
    <input type="checkbox" *ngIf="!unusedProducts.length && !value.length" style="position: absolute;left:-1000px" cc-focus noBlur="true" grab="true" [tabindex]="editTabindex" />
    <div class="box-products-display" *ngIf="value.length">
      <div class="box-product" *ngFor="let p of value; let i = index">
        <div class="box-product-detail box-product-name">{{p.name}}</div>
        <div class="box-product-detail box-product-quantity">{{p | quantity}}</div>
        <div class="box-product-detail box-product-action">
          <a href="#" cc-focus #button=cc-focus [tabindex]="editTabindex" (click)="$event.preventDefault();removeProductClick(p.id)">
            <div class="icon">
              <i class="icon-trash"></i>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div class="box-products-display" *ngIf="!value.length && !unusedProducts.length || !value.length">
      <div class="box-product">
        <div class="box-product-detail box-product-name"><span *ngIf="!value.length">No products added</span></div>
        <div class="box-product-detail box-product-quantity"><span *ngIf="!value.length && !unusedProducts.length" class="muted">no more products to add</span>&nbsp;</div>
        <div class="box-product-detail box-product-action">
          <div class="spacer"></div>
        </div>
      </div>
    </div>
    <div *ngIf="unusedProducts.length" class="box-products-add">
      <div class="box-product" *ngFor="let p of unusedProducts; let i = index">
        <div class="box-product-detail box-product-name">{{p.name}}</div>
        <div class="box-product-detail box-product-quantity">&nbsp;</div>
        <div class="box-product-detail box-product-action">
          <a href="#" cc-focus #button=cc-focus [tabindex]="editTabindex" (click)="$event.preventDefault();addProductClick(p.id)">
            <div class="icon">
              <i class="icon-add"></i>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</cc-editable>