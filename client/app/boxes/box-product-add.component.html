<div class="box-product box-product-add" [class.no-products]="noProducts" (keydown)="keydown($event)">
  <div *ngIf="noProducts && !adding" class="box-product-detail no-products-text">No products added yet.</div> 
  <div *ngIf="products.length && !adding" (click)="onAddClick()" [class.hover]="addHover">
    <div class="box-product-detail box-product-name box-product-display" [style.width.px]="productNameWidth + productQuantityWidth">Add
      <span *ngIf="noProducts">a</span>
      <span *ngIf="!noProducts">another</span>
      product...</div>
    <div class="box-product-detail box-product-action box-product-display">
      <a #add [tabindex]="editTabindex" (focus)="onAddFocus()" (blur)="onAddBlur()"><i class="icon-add"></i></a>
    </div>       
  </div>
  <div *ngIf="adding" style="position: relative" class="box-product-detail" [style.width.px]="productNameWidth + productQuantityWidth">
    <div class="edit-background">
      <i class="icon-ok" (click)="onAddOkClick()"></i><i class="icon-cancel" (click)="onAddCancelClick()"></i>
    </div>
    <div class="box-product-detail box-product-name box-product-edit" [style.width.px]="productNameWidth"><select #select (change)="onAddProductChange($event)" [tabindex]="editTabindex">
        <option *ngFor="let p of products; let i = index" [value]="i">{{p.name}}</option>
      </select>
    </div>
    <div class="box-product-detail box-product-quantity box-product-edit" [style.width.px]="productQuantityWidth">
      <span class="box-product-quantity-each" *ngIf="product.unitType == 'each'">x</span>
      <input type="text" class="input" [(ngModel)]="quantityStringValue" [tabindex]="editTabindex" />
      <span class="box-product-quantity-perkg" *ngIf="product.unitType == 'perKg'">Kg</span>
    </div>
  </div>
</div>
<input type="text" *ngIf="adding && products.length > 1" [tabindex]="editTabindex" style="position: absolute; left: -10000px" (focus)="onAfterAddFocus()" />