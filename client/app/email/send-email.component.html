<div class="email-edit" cc-active (activate)="focused = true" (deactivate)="focused = false" [class.focused]="focused" [class.invalid]="!valid">
  <div class="form-row">
    <label>To:</label>
    <ul class="field recipients">
      <li [class.removed]="!r.address" [class.muted]="!r.address" *ngFor="let r of recipients">{{r.name}} <span class="muted">({{r.address | defaultTo:'no email'}})</span></li>
    </ul>
  </div>
  <div class="form-row subject">
    <label>Subject:</label>
    <cc-validatable [valid]="!!subject.length" message="Subject should not be empty">
      <input type="text" class="field" #input cc-active cc-activate-on-focus cc-deactivate-on-blur tabindex="1" [(ngModel)]="subject" />
    </cc-validatable>
  </div>
  <div class="form-row message">
    <label>Message:</label>
    <cc-validatable [valid]="!!body.length" message="Message should not be empty">
      <textarea class="field" cc-active cc-activate-on-focus cc-deactivate-on-blur tabindex="1" [(ngModel)]="body"></textarea>
    </cc-validatable>
  </div>
  <div class="actions"> <!-- [disabled]="noRecipients" -->
    <a class="button-new button-new-right" cc-active cc-activate-on-focus [tabindex]="1" (click)="send()"><i class="icon-mail-dark"></i>Send</a>
    <a class="button-new button-new-right" cc-active cc-activate-on-focus [tabindex]="1" [routerLink]="cancelLinkParams"><i class="icon-cancel"></i>Cancel</a>
  </div>  
</div>